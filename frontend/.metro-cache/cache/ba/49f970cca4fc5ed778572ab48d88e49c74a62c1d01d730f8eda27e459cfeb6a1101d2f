{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    loadUser: async () => {\n      try {\n        const userJson = await AsyncStorage.default.getItem('user');\n        if (userJson) {\n          const user = JSON.parse(userJson);\n          set({\n            user,\n            isAuthenticated: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load user error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username,\n            password\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Invalid credentials');\n        }\n        const user = await response.json();\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    },\n    register: async (username, email, password, mode) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username,\n            email,\n            password,\n            mode\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Registration failed');\n        }\n        const userData = await response.json();\n        // Auto login after registration\n        await get().login(username, password);\n      } catch (error) {\n        console.error('Register error:', error);\n        throw error;\n      }\n    },\n    logout: async () => {\n      await AsyncStorage.default.removeItem('user');\n      set({\n        user: null,\n        isAuthenticated: false\n      });\n    },\n    updateMode: async mode => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        const response = await fetch(`${API_URL}/api/users/${user.user_id}/mode`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            mode\n          })\n        });\n        if (response.ok) {\n          const updatedUser = {\n            ...user,\n            mode: mode\n          };\n          await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n          set({\n            user: updatedUser\n          });\n        }\n      } catch (error) {\n        console.error('Update mode error:', error);\n      }\n    },\n    upgradeToPremium: async () => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        const response = await fetch(`${API_URL}/api/users/${user.user_id}/premium`, {\n          method: 'POST'\n        });\n        if (response.ok) {\n          const updatedUser = {\n            ...user,\n            is_premium: true\n          };\n          await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n          set({\n            user: updatedUser\n          });\n        }\n      } catch (error) {\n        console.error('Upgrade error:', error);\n      }\n    }\n  }));\n});","lineCount":159,"map":[[12,2,25,0,"Object"],[12,8,25,0],[12,9,25,0,"defineProperty"],[12,23,25,0],[12,24,25,0,"exports"],[12,31,25,0],[13,4,25,0,"enumerable"],[13,14,25,0],[14,4,25,0,"get"],[14,7,25,0],[14,18,25,0,"get"],[14,19,25,0],[15,6,25,0],[15,13,25,0,"useAuthStore"],[15,25,25,0],[16,4,25,0],[17,2,25,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,23,0],[21,8,23,6,"API_URL"],[21,15,23,13],[21,18,23,16,"process"],[21,25,23,23],[21,26,23,24,"env"],[21,29,23,27],[21,30,23,28,"EXPO_PUBLIC_BACKEND_URL"],[21,53,23,51],[22,2,25,7],[22,8,25,13,"useAuthStore"],[22,20,25,25],[22,23,25,28],[22,27,25,28,"create"],[22,35,25,34],[22,36,25,34,"create"],[22,42,25,34],[22,44,25,46],[22,45,25,47,"set"],[22,48,25,50],[22,50,25,52,"get"],[22,53,25,55],[22,59,25,61],[23,4,26,2,"user"],[23,8,26,6],[23,10,26,8],[23,14,26,12],[24,4,27,2,"isAuthenticated"],[24,19,27,17],[24,21,27,19],[24,26,27,24],[25,4,28,2,"isLoading"],[25,13,28,11],[25,15,28,13],[25,19,28,17],[26,4,30,2,"loadUser"],[26,12,30,10],[26,14,30,12],[26,20,30,12,"loadUser"],[26,21,30,12],[26,26,30,24],[27,6,31,4],[27,10,31,8],[28,8,32,6],[28,14,32,12,"userJson"],[28,22,32,20],[28,25,32,23],[28,31,32,29,"AsyncStorage"],[28,43,32,41],[28,44,32,41,"default"],[28,51,32,41],[28,52,32,42,"getItem"],[28,59,32,49],[28,60,32,50],[28,66,32,56],[28,67,32,57],[29,8,33,6],[29,12,33,10,"userJson"],[29,20,33,18],[29,22,33,20],[30,10,34,8],[30,16,34,14,"user"],[30,20,34,18],[30,23,34,21,"JSON"],[30,27,34,25],[30,28,34,26,"parse"],[30,33,34,31],[30,34,34,32,"userJson"],[30,42,34,40],[30,43,34,41],[31,10,35,8,"set"],[31,13,35,11],[31,14,35,12],[32,12,35,14,"user"],[32,16,35,18],[33,12,35,20,"isAuthenticated"],[33,27,35,35],[33,29,35,37],[33,33,35,41],[34,12,35,43,"isLoading"],[34,21,35,52],[34,23,35,54],[35,10,35,60],[35,11,35,61],[35,12,35,62],[36,8,36,6],[36,9,36,7],[36,15,36,13],[37,10,37,8,"set"],[37,13,37,11],[37,14,37,12],[38,12,37,14,"isLoading"],[38,21,37,23],[38,23,37,25],[39,10,37,31],[39,11,37,32],[39,12,37,33],[40,8,38,6],[41,6,39,4],[41,7,39,5],[41,8,39,6],[41,15,39,13,"error"],[41,20,39,18],[41,22,39,20],[42,8,40,6,"console"],[42,15,40,13],[42,16,40,14,"error"],[42,21,40,19],[42,22,40,20],[42,40,40,38],[42,42,40,40,"error"],[42,47,40,45],[42,48,40,46],[43,8,41,6,"set"],[43,11,41,9],[43,12,41,10],[44,10,41,12,"isLoading"],[44,19,41,21],[44,21,41,23],[45,8,41,29],[45,9,41,30],[45,10,41,31],[46,6,42,4],[47,4,43,2],[47,5,43,3],[48,4,45,2,"login"],[48,9,45,7],[48,11,45,9],[48,17,45,9,"login"],[48,18,45,16,"username"],[48,26,45,32],[48,28,45,34,"password"],[48,36,45,50],[48,41,45,55],[49,6,46,4],[49,10,46,8],[50,8,47,6],[50,14,47,12,"response"],[50,22,47,20],[50,25,47,23],[50,31,47,29,"fetch"],[50,36,47,34],[50,37,47,35],[50,40,47,38,"API_URL"],[50,47,47,45],[50,64,47,62],[50,66,47,64],[51,10,48,8,"method"],[51,16,48,14],[51,18,48,16],[51,24,48,22],[52,10,49,8,"headers"],[52,17,49,15],[52,19,49,17],[53,12,49,19],[53,26,49,33],[53,28,49,35],[54,10,49,54],[54,11,49,55],[55,10,50,8,"body"],[55,14,50,12],[55,16,50,14,"JSON"],[55,20,50,18],[55,21,50,19,"stringify"],[55,30,50,28],[55,31,50,29],[56,12,50,31,"username"],[56,20,50,39],[57,12,50,41,"password"],[58,10,50,50],[58,11,50,51],[59,8,51,6],[59,9,51,7],[59,10,51,8],[60,8,53,6],[60,12,53,10],[60,13,53,11,"response"],[60,21,53,19],[60,22,53,20,"ok"],[60,24,53,22],[60,26,53,24],[61,10,54,8],[61,16,54,14],[61,20,54,18,"Error"],[61,25,54,23],[61,26,54,24],[61,47,54,45],[61,48,54,46],[62,8,55,6],[63,8,57,6],[63,14,57,12,"user"],[63,18,57,16],[63,21,57,19],[63,27,57,25,"response"],[63,35,57,33],[63,36,57,34,"json"],[63,40,57,38],[63,41,57,39],[63,42,57,40],[64,8,58,6],[64,14,58,12,"AsyncStorage"],[64,26,58,24],[64,27,58,24,"default"],[64,34,58,24],[64,35,58,25,"setItem"],[64,42,58,32],[64,43,58,33],[64,49,58,39],[64,51,58,41,"JSON"],[64,55,58,45],[64,56,58,46,"stringify"],[64,65,58,55],[64,66,58,56,"user"],[64,70,58,60],[64,71,58,61],[64,72,58,62],[65,8,59,6,"set"],[65,11,59,9],[65,12,59,10],[66,10,59,12,"user"],[66,14,59,16],[67,10,59,18,"isAuthenticated"],[67,25,59,33],[67,27,59,35],[68,8,59,40],[68,9,59,41],[68,10,59,42],[69,6,60,4],[69,7,60,5],[69,8,60,6],[69,15,60,13,"error"],[69,20,60,18],[69,22,60,20],[70,8,61,6,"console"],[70,15,61,13],[70,16,61,14,"error"],[70,21,61,19],[70,22,61,20],[70,36,61,34],[70,38,61,36,"error"],[70,43,61,41],[70,44,61,42],[71,8,62,6],[71,14,62,12,"error"],[71,19,62,17],[72,6,63,4],[73,4,64,2],[73,5,64,3],[74,4,66,2,"register"],[74,12,66,10],[74,14,66,12],[74,20,66,12,"register"],[74,21,66,19,"username"],[74,29,66,35],[74,31,66,37,"email"],[74,36,66,50],[74,38,66,52,"password"],[74,46,66,68],[74,48,66,70,"mode"],[74,52,66,82],[74,57,66,87],[75,6,67,4],[75,10,67,8],[76,8,68,6],[76,14,68,12,"response"],[76,22,68,20],[76,25,68,23],[76,31,68,29,"fetch"],[76,36,68,34],[76,37,68,35],[76,40,68,38,"API_URL"],[76,47,68,45],[76,67,68,65],[76,69,68,67],[77,10,69,8,"method"],[77,16,69,14],[77,18,69,16],[77,24,69,22],[78,10,70,8,"headers"],[78,17,70,15],[78,19,70,17],[79,12,70,19],[79,26,70,33],[79,28,70,35],[80,10,70,54],[80,11,70,55],[81,10,71,8,"body"],[81,14,71,12],[81,16,71,14,"JSON"],[81,20,71,18],[81,21,71,19,"stringify"],[81,30,71,28],[81,31,71,29],[82,12,71,31,"username"],[82,20,71,39],[83,12,71,41,"email"],[83,17,71,46],[84,12,71,48,"password"],[84,20,71,56],[85,12,71,58,"mode"],[86,10,71,63],[86,11,71,64],[87,8,72,6],[87,9,72,7],[87,10,72,8],[88,8,74,6],[88,12,74,10],[88,13,74,11,"response"],[88,21,74,19],[88,22,74,20,"ok"],[88,24,74,22],[88,26,74,24],[89,10,75,8],[89,16,75,14],[89,20,75,18,"Error"],[89,25,75,23],[89,26,75,24],[89,47,75,45],[89,48,75,46],[90,8,76,6],[91,8,78,6],[91,14,78,12,"userData"],[91,22,78,20],[91,25,78,23],[91,31,78,29,"response"],[91,39,78,37],[91,40,78,38,"json"],[91,44,78,42],[91,45,78,43],[91,46,78,44],[92,8,79,6],[93,8,80,6],[93,14,80,12,"get"],[93,17,80,15],[93,18,80,16],[93,19,80,17],[93,20,80,18,"login"],[93,25,80,23],[93,26,80,24,"username"],[93,34,80,32],[93,36,80,34,"password"],[93,44,80,42],[93,45,80,43],[94,6,81,4],[94,7,81,5],[94,8,81,6],[94,15,81,13,"error"],[94,20,81,18],[94,22,81,20],[95,8,82,6,"console"],[95,15,82,13],[95,16,82,14,"error"],[95,21,82,19],[95,22,82,20],[95,39,82,37],[95,41,82,39,"error"],[95,46,82,44],[95,47,82,45],[96,8,83,6],[96,14,83,12,"error"],[96,19,83,17],[97,6,84,4],[98,4,85,2],[98,5,85,3],[99,4,87,2,"logout"],[99,10,87,8],[99,12,87,10],[99,18,87,10,"logout"],[99,19,87,10],[99,24,87,22],[100,6,88,4],[100,12,88,10,"AsyncStorage"],[100,24,88,22],[100,25,88,22,"default"],[100,32,88,22],[100,33,88,23,"removeItem"],[100,43,88,33],[100,44,88,34],[100,50,88,40],[100,51,88,41],[101,6,89,4,"set"],[101,9,89,7],[101,10,89,8],[102,8,89,10,"user"],[102,12,89,14],[102,14,89,16],[102,18,89,20],[103,8,89,22,"isAuthenticated"],[103,23,89,37],[103,25,89,39],[104,6,89,45],[104,7,89,46],[104,8,89,47],[105,4,90,2],[105,5,90,3],[106,4,92,2,"updateMode"],[106,14,92,12],[106,16,92,14],[106,22,92,21,"mode"],[106,26,92,33],[106,30,92,38],[107,6,93,4],[107,12,93,10],[108,8,93,12,"user"],[109,6,93,17],[109,7,93,18],[109,10,93,21,"get"],[109,13,93,24],[109,14,93,25],[109,15,93,26],[110,6,94,4],[110,10,94,8],[110,11,94,9,"user"],[110,15,94,13],[110,17,94,15],[111,6,96,4],[111,10,96,8],[112,8,97,6],[112,14,97,12,"response"],[112,22,97,20],[112,25,97,23],[112,31,97,29,"fetch"],[112,36,97,34],[112,37,97,35],[112,40,97,38,"API_URL"],[112,47,97,45],[112,61,97,59,"user"],[112,65,97,63],[112,66,97,64,"user_id"],[112,73,97,71],[112,80,97,78],[112,82,97,80],[113,10,98,8,"method"],[113,16,98,14],[113,18,98,16],[113,23,98,21],[114,10,99,8,"headers"],[114,17,99,15],[114,19,99,17],[115,12,99,19],[115,26,99,33],[115,28,99,35],[116,10,99,54],[116,11,99,55],[117,10,100,8,"body"],[117,14,100,12],[117,16,100,14,"JSON"],[117,20,100,18],[117,21,100,19,"stringify"],[117,30,100,28],[117,31,100,29],[118,12,100,31,"mode"],[119,10,100,36],[119,11,100,37],[120,8,101,6],[120,9,101,7],[120,10,101,8],[121,8,103,6],[121,12,103,10,"response"],[121,20,103,18],[121,21,103,19,"ok"],[121,23,103,21],[121,25,103,23],[122,10,104,8],[122,16,104,14,"updatedUser"],[122,27,104,25],[122,30,104,28],[123,12,104,30],[123,15,104,33,"user"],[123,19,104,37],[124,12,104,39,"mode"],[124,16,104,43],[124,18,104,45,"mode"],[125,10,104,57],[125,11,104,58],[126,10,105,8],[126,16,105,14,"AsyncStorage"],[126,28,105,26],[126,29,105,26,"default"],[126,36,105,26],[126,37,105,27,"setItem"],[126,44,105,34],[126,45,105,35],[126,51,105,41],[126,53,105,43,"JSON"],[126,57,105,47],[126,58,105,48,"stringify"],[126,67,105,57],[126,68,105,58,"updatedUser"],[126,79,105,69],[126,80,105,70],[126,81,105,71],[127,10,106,8,"set"],[127,13,106,11],[127,14,106,12],[128,12,106,14,"user"],[128,16,106,18],[128,18,106,20,"updatedUser"],[129,10,106,32],[129,11,106,33],[129,12,106,34],[130,8,107,6],[131,6,108,4],[131,7,108,5],[131,8,108,6],[131,15,108,13,"error"],[131,20,108,18],[131,22,108,20],[132,8,109,6,"console"],[132,15,109,13],[132,16,109,14,"error"],[132,21,109,19],[132,22,109,20],[132,42,109,40],[132,44,109,42,"error"],[132,49,109,47],[132,50,109,48],[133,6,110,4],[134,4,111,2],[134,5,111,3],[135,4,113,2,"upgradeToPremium"],[135,20,113,18],[135,22,113,20],[135,28,113,20,"upgradeToPremium"],[135,29,113,20],[135,34,113,32],[136,6,114,4],[136,12,114,10],[137,8,114,12,"user"],[138,6,114,17],[138,7,114,18],[138,10,114,21,"get"],[138,13,114,24],[138,14,114,25],[138,15,114,26],[139,6,115,4],[139,10,115,8],[139,11,115,9,"user"],[139,15,115,13],[139,17,115,15],[140,6,117,4],[140,10,117,8],[141,8,118,6],[141,14,118,12,"response"],[141,22,118,20],[141,25,118,23],[141,31,118,29,"fetch"],[141,36,118,34],[141,37,118,35],[141,40,118,38,"API_URL"],[141,47,118,45],[141,61,118,59,"user"],[141,65,118,63],[141,66,118,64,"user_id"],[141,73,118,71],[141,83,118,81],[141,85,118,83],[142,10,119,8,"method"],[142,16,119,14],[142,18,119,16],[143,8,120,6],[143,9,120,7],[143,10,120,8],[144,8,122,6],[144,12,122,10,"response"],[144,20,122,18],[144,21,122,19,"ok"],[144,23,122,21],[144,25,122,23],[145,10,123,8],[145,16,123,14,"updatedUser"],[145,27,123,25],[145,30,123,28],[146,12,123,30],[146,15,123,33,"user"],[146,19,123,37],[147,12,123,39,"is_premium"],[147,22,123,49],[147,24,123,51],[148,10,123,56],[148,11,123,57],[149,10,124,8],[149,16,124,14,"AsyncStorage"],[149,28,124,26],[149,29,124,26,"default"],[149,36,124,26],[149,37,124,27,"setItem"],[149,44,124,34],[149,45,124,35],[149,51,124,41],[149,53,124,43,"JSON"],[149,57,124,47],[149,58,124,48,"stringify"],[149,67,124,57],[149,68,124,58,"updatedUser"],[149,79,124,69],[149,80,124,70],[149,81,124,71],[150,10,125,8,"set"],[150,13,125,11],[150,14,125,12],[151,12,125,14,"user"],[151,16,125,18],[151,18,125,20,"updatedUser"],[152,10,125,32],[152,11,125,33],[152,12,125,34],[153,8,126,6],[154,6,127,4],[154,7,127,5],[154,8,127,6],[154,15,127,13,"error"],[154,20,127,18],[154,22,127,20],[155,8,128,6,"console"],[155,15,128,13],[155,16,128,14,"error"],[155,21,128,19],[155,22,128,20],[155,38,128,36],[155,40,128,38,"error"],[155,45,128,43],[155,46,128,44],[156,6,129,4],[157,4,130,2],[158,2,131,0],[158,3,131,1],[158,4,131,2],[158,5,131,3],[159,0,131,4],[159,3]],"functionMap":{"names":["<global>","create$argument_0","loadUser","login","register","logout","updateMode","upgradeToPremium"],"mappings":"AAA;8CCwB;YCK;GDa;SEE;GFmB;YGE;GHmB;UIE;GJG;cKE;GLmB;oBME;GNiB;EDC"},"hasCjsExports":false},"type":"js/module"}]}