{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    loadUser: async () => {\n      try {\n        const userJson = await AsyncStorage.default.getItem('user');\n        if (userJson) {\n          const user = JSON.parse(userJson);\n          set({\n            user,\n            isAuthenticated: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load user error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username,\n            password\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Invalid credentials');\n        }\n        const user = await response.json();\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    },\n    register: async (username, email, password, mode) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username,\n            email,\n            password,\n            mode\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Registration failed');\n        }\n        const userData = await response.json();\n        // Auto login after registration\n        await get().login(username, password);\n      } catch (error) {\n        console.error('Register error:', error);\n        throw error;\n      }\n    },\n    logout: async () => {\n      await AsyncStorage.default.removeItem('user');\n      set({\n        user: null,\n        isAuthenticated: false\n      });\n    },\n    updateMode: async mode => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        const response = await fetch(`${API_URL}/api/users/${user.user_id}/mode`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            mode\n          })\n        });\n        if (response.ok) {\n          const updatedUser = {\n            ...user,\n            mode: mode\n          };\n          await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n          set({\n            user: updatedUser\n          });\n        }\n      } catch (error) {\n        console.error('Update mode error:', error);\n      }\n    },\n    upgradeToPremium: async () => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        const response = await fetch(`${API_URL}/api/users/${user.user_id}/premium`, {\n          method: 'POST'\n        });\n        if (response.ok) {\n          const updatedUser = {\n            ...user,\n            is_premium: true\n          };\n          await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n          set({\n            user: updatedUser\n          });\n        }\n      } catch (error) {\n        console.error('Upgrade error:', error);\n      }\n    }\n  }));\n});","lineCount":160,"map":[[12,2,25,0,"Object"],[12,8,25,0],[12,9,25,0,"defineProperty"],[12,23,25,0],[12,24,25,0,"exports"],[12,31,25,0],[13,4,25,0,"enumerable"],[13,14,25,0],[14,4,25,0,"get"],[14,7,25,0],[14,18,25,0,"get"],[14,19,25,0],[15,6,25,0],[15,13,25,0,"useAuthStore"],[15,25,25,0],[16,4,25,0],[17,2,25,0],[18,2,131,4],[18,6,131,4,"_expoVirtualEnv"],[18,21,131,4],[18,24,131,4,"require"],[18,31,131,4],[18,32,131,4,"_dependencyMap"],[18,46,131,4],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,23,0],[22,8,23,6,"API_URL"],[22,15,23,13],[22,18,23,13,"_expoVirtualEnv"],[22,33,23,13],[22,34,23,13,"env"],[22,37,23,13],[22,38,23,13,"EXPO_PUBLIC_BACKEND_URL"],[22,61,23,51],[23,2,25,7],[23,8,25,13,"useAuthStore"],[23,20,25,25],[23,23,25,28],[23,27,25,28,"create"],[23,35,25,34],[23,36,25,34,"create"],[23,42,25,34],[23,44,25,46],[23,45,25,47,"set"],[23,48,25,50],[23,50,25,52,"get"],[23,53,25,55],[23,59,25,61],[24,4,26,2,"user"],[24,8,26,6],[24,10,26,8],[24,14,26,12],[25,4,27,2,"isAuthenticated"],[25,19,27,17],[25,21,27,19],[25,26,27,24],[26,4,28,2,"isLoading"],[26,13,28,11],[26,15,28,13],[26,19,28,17],[27,4,30,2,"loadUser"],[27,12,30,10],[27,14,30,12],[27,20,30,12,"loadUser"],[27,21,30,12],[27,26,30,24],[28,6,31,4],[28,10,31,8],[29,8,32,6],[29,14,32,12,"userJson"],[29,22,32,20],[29,25,32,23],[29,31,32,29,"AsyncStorage"],[29,43,32,41],[29,44,32,41,"default"],[29,51,32,41],[29,52,32,42,"getItem"],[29,59,32,49],[29,60,32,50],[29,66,32,56],[29,67,32,57],[30,8,33,6],[30,12,33,10,"userJson"],[30,20,33,18],[30,22,33,20],[31,10,34,8],[31,16,34,14,"user"],[31,20,34,18],[31,23,34,21,"JSON"],[31,27,34,25],[31,28,34,26,"parse"],[31,33,34,31],[31,34,34,32,"userJson"],[31,42,34,40],[31,43,34,41],[32,10,35,8,"set"],[32,13,35,11],[32,14,35,12],[33,12,35,14,"user"],[33,16,35,18],[34,12,35,20,"isAuthenticated"],[34,27,35,35],[34,29,35,37],[34,33,35,41],[35,12,35,43,"isLoading"],[35,21,35,52],[35,23,35,54],[36,10,35,60],[36,11,35,61],[36,12,35,62],[37,8,36,6],[37,9,36,7],[37,15,36,13],[38,10,37,8,"set"],[38,13,37,11],[38,14,37,12],[39,12,37,14,"isLoading"],[39,21,37,23],[39,23,37,25],[40,10,37,31],[40,11,37,32],[40,12,37,33],[41,8,38,6],[42,6,39,4],[42,7,39,5],[42,8,39,6],[42,15,39,13,"error"],[42,20,39,18],[42,22,39,20],[43,8,40,6,"console"],[43,15,40,13],[43,16,40,14,"error"],[43,21,40,19],[43,22,40,20],[43,40,40,38],[43,42,40,40,"error"],[43,47,40,45],[43,48,40,46],[44,8,41,6,"set"],[44,11,41,9],[44,12,41,10],[45,10,41,12,"isLoading"],[45,19,41,21],[45,21,41,23],[46,8,41,29],[46,9,41,30],[46,10,41,31],[47,6,42,4],[48,4,43,2],[48,5,43,3],[49,4,45,2,"login"],[49,9,45,7],[49,11,45,9],[49,17,45,9,"login"],[49,18,45,16,"username"],[49,26,45,32],[49,28,45,34,"password"],[49,36,45,50],[49,41,45,55],[50,6,46,4],[50,10,46,8],[51,8,47,6],[51,14,47,12,"response"],[51,22,47,20],[51,25,47,23],[51,31,47,29,"fetch"],[51,36,47,34],[51,37,47,35],[51,40,47,38,"API_URL"],[51,47,47,45],[51,64,47,62],[51,66,47,64],[52,10,48,8,"method"],[52,16,48,14],[52,18,48,16],[52,24,48,22],[53,10,49,8,"headers"],[53,17,49,15],[53,19,49,17],[54,12,49,19],[54,26,49,33],[54,28,49,35],[55,10,49,54],[55,11,49,55],[56,10,50,8,"body"],[56,14,50,12],[56,16,50,14,"JSON"],[56,20,50,18],[56,21,50,19,"stringify"],[56,30,50,28],[56,31,50,29],[57,12,50,31,"username"],[57,20,50,39],[58,12,50,41,"password"],[59,10,50,50],[59,11,50,51],[60,8,51,6],[60,9,51,7],[60,10,51,8],[61,8,53,6],[61,12,53,10],[61,13,53,11,"response"],[61,21,53,19],[61,22,53,20,"ok"],[61,24,53,22],[61,26,53,24],[62,10,54,8],[62,16,54,14],[62,20,54,18,"Error"],[62,25,54,23],[62,26,54,24],[62,47,54,45],[62,48,54,46],[63,8,55,6],[64,8,57,6],[64,14,57,12,"user"],[64,18,57,16],[64,21,57,19],[64,27,57,25,"response"],[64,35,57,33],[64,36,57,34,"json"],[64,40,57,38],[64,41,57,39],[64,42,57,40],[65,8,58,6],[65,14,58,12,"AsyncStorage"],[65,26,58,24],[65,27,58,24,"default"],[65,34,58,24],[65,35,58,25,"setItem"],[65,42,58,32],[65,43,58,33],[65,49,58,39],[65,51,58,41,"JSON"],[65,55,58,45],[65,56,58,46,"stringify"],[65,65,58,55],[65,66,58,56,"user"],[65,70,58,60],[65,71,58,61],[65,72,58,62],[66,8,59,6,"set"],[66,11,59,9],[66,12,59,10],[67,10,59,12,"user"],[67,14,59,16],[68,10,59,18,"isAuthenticated"],[68,25,59,33],[68,27,59,35],[69,8,59,40],[69,9,59,41],[69,10,59,42],[70,6,60,4],[70,7,60,5],[70,8,60,6],[70,15,60,13,"error"],[70,20,60,18],[70,22,60,20],[71,8,61,6,"console"],[71,15,61,13],[71,16,61,14,"error"],[71,21,61,19],[71,22,61,20],[71,36,61,34],[71,38,61,36,"error"],[71,43,61,41],[71,44,61,42],[72,8,62,6],[72,14,62,12,"error"],[72,19,62,17],[73,6,63,4],[74,4,64,2],[74,5,64,3],[75,4,66,2,"register"],[75,12,66,10],[75,14,66,12],[75,20,66,12,"register"],[75,21,66,19,"username"],[75,29,66,35],[75,31,66,37,"email"],[75,36,66,50],[75,38,66,52,"password"],[75,46,66,68],[75,48,66,70,"mode"],[75,52,66,82],[75,57,66,87],[76,6,67,4],[76,10,67,8],[77,8,68,6],[77,14,68,12,"response"],[77,22,68,20],[77,25,68,23],[77,31,68,29,"fetch"],[77,36,68,34],[77,37,68,35],[77,40,68,38,"API_URL"],[77,47,68,45],[77,67,68,65],[77,69,68,67],[78,10,69,8,"method"],[78,16,69,14],[78,18,69,16],[78,24,69,22],[79,10,70,8,"headers"],[79,17,70,15],[79,19,70,17],[80,12,70,19],[80,26,70,33],[80,28,70,35],[81,10,70,54],[81,11,70,55],[82,10,71,8,"body"],[82,14,71,12],[82,16,71,14,"JSON"],[82,20,71,18],[82,21,71,19,"stringify"],[82,30,71,28],[82,31,71,29],[83,12,71,31,"username"],[83,20,71,39],[84,12,71,41,"email"],[84,17,71,46],[85,12,71,48,"password"],[85,20,71,56],[86,12,71,58,"mode"],[87,10,71,63],[87,11,71,64],[88,8,72,6],[88,9,72,7],[88,10,72,8],[89,8,74,6],[89,12,74,10],[89,13,74,11,"response"],[89,21,74,19],[89,22,74,20,"ok"],[89,24,74,22],[89,26,74,24],[90,10,75,8],[90,16,75,14],[90,20,75,18,"Error"],[90,25,75,23],[90,26,75,24],[90,47,75,45],[90,48,75,46],[91,8,76,6],[92,8,78,6],[92,14,78,12,"userData"],[92,22,78,20],[92,25,78,23],[92,31,78,29,"response"],[92,39,78,37],[92,40,78,38,"json"],[92,44,78,42],[92,45,78,43],[92,46,78,44],[93,8,79,6],[94,8,80,6],[94,14,80,12,"get"],[94,17,80,15],[94,18,80,16],[94,19,80,17],[94,20,80,18,"login"],[94,25,80,23],[94,26,80,24,"username"],[94,34,80,32],[94,36,80,34,"password"],[94,44,80,42],[94,45,80,43],[95,6,81,4],[95,7,81,5],[95,8,81,6],[95,15,81,13,"error"],[95,20,81,18],[95,22,81,20],[96,8,82,6,"console"],[96,15,82,13],[96,16,82,14,"error"],[96,21,82,19],[96,22,82,20],[96,39,82,37],[96,41,82,39,"error"],[96,46,82,44],[96,47,82,45],[97,8,83,6],[97,14,83,12,"error"],[97,19,83,17],[98,6,84,4],[99,4,85,2],[99,5,85,3],[100,4,87,2,"logout"],[100,10,87,8],[100,12,87,10],[100,18,87,10,"logout"],[100,19,87,10],[100,24,87,22],[101,6,88,4],[101,12,88,10,"AsyncStorage"],[101,24,88,22],[101,25,88,22,"default"],[101,32,88,22],[101,33,88,23,"removeItem"],[101,43,88,33],[101,44,88,34],[101,50,88,40],[101,51,88,41],[102,6,89,4,"set"],[102,9,89,7],[102,10,89,8],[103,8,89,10,"user"],[103,12,89,14],[103,14,89,16],[103,18,89,20],[104,8,89,22,"isAuthenticated"],[104,23,89,37],[104,25,89,39],[105,6,89,45],[105,7,89,46],[105,8,89,47],[106,4,90,2],[106,5,90,3],[107,4,92,2,"updateMode"],[107,14,92,12],[107,16,92,14],[107,22,92,21,"mode"],[107,26,92,33],[107,30,92,38],[108,6,93,4],[108,12,93,10],[109,8,93,12,"user"],[110,6,93,17],[110,7,93,18],[110,10,93,21,"get"],[110,13,93,24],[110,14,93,25],[110,15,93,26],[111,6,94,4],[111,10,94,8],[111,11,94,9,"user"],[111,15,94,13],[111,17,94,15],[112,6,96,4],[112,10,96,8],[113,8,97,6],[113,14,97,12,"response"],[113,22,97,20],[113,25,97,23],[113,31,97,29,"fetch"],[113,36,97,34],[113,37,97,35],[113,40,97,38,"API_URL"],[113,47,97,45],[113,61,97,59,"user"],[113,65,97,63],[113,66,97,64,"user_id"],[113,73,97,71],[113,80,97,78],[113,82,97,80],[114,10,98,8,"method"],[114,16,98,14],[114,18,98,16],[114,23,98,21],[115,10,99,8,"headers"],[115,17,99,15],[115,19,99,17],[116,12,99,19],[116,26,99,33],[116,28,99,35],[117,10,99,54],[117,11,99,55],[118,10,100,8,"body"],[118,14,100,12],[118,16,100,14,"JSON"],[118,20,100,18],[118,21,100,19,"stringify"],[118,30,100,28],[118,31,100,29],[119,12,100,31,"mode"],[120,10,100,36],[120,11,100,37],[121,8,101,6],[121,9,101,7],[121,10,101,8],[122,8,103,6],[122,12,103,10,"response"],[122,20,103,18],[122,21,103,19,"ok"],[122,23,103,21],[122,25,103,23],[123,10,104,8],[123,16,104,14,"updatedUser"],[123,27,104,25],[123,30,104,28],[124,12,104,30],[124,15,104,33,"user"],[124,19,104,37],[125,12,104,39,"mode"],[125,16,104,43],[125,18,104,45,"mode"],[126,10,104,57],[126,11,104,58],[127,10,105,8],[127,16,105,14,"AsyncStorage"],[127,28,105,26],[127,29,105,26,"default"],[127,36,105,26],[127,37,105,27,"setItem"],[127,44,105,34],[127,45,105,35],[127,51,105,41],[127,53,105,43,"JSON"],[127,57,105,47],[127,58,105,48,"stringify"],[127,67,105,57],[127,68,105,58,"updatedUser"],[127,79,105,69],[127,80,105,70],[127,81,105,71],[128,10,106,8,"set"],[128,13,106,11],[128,14,106,12],[129,12,106,14,"user"],[129,16,106,18],[129,18,106,20,"updatedUser"],[130,10,106,32],[130,11,106,33],[130,12,106,34],[131,8,107,6],[132,6,108,4],[132,7,108,5],[132,8,108,6],[132,15,108,13,"error"],[132,20,108,18],[132,22,108,20],[133,8,109,6,"console"],[133,15,109,13],[133,16,109,14,"error"],[133,21,109,19],[133,22,109,20],[133,42,109,40],[133,44,109,42,"error"],[133,49,109,47],[133,50,109,48],[134,6,110,4],[135,4,111,2],[135,5,111,3],[136,4,113,2,"upgradeToPremium"],[136,20,113,18],[136,22,113,20],[136,28,113,20,"upgradeToPremium"],[136,29,113,20],[136,34,113,32],[137,6,114,4],[137,12,114,10],[138,8,114,12,"user"],[139,6,114,17],[139,7,114,18],[139,10,114,21,"get"],[139,13,114,24],[139,14,114,25],[139,15,114,26],[140,6,115,4],[140,10,115,8],[140,11,115,9,"user"],[140,15,115,13],[140,17,115,15],[141,6,117,4],[141,10,117,8],[142,8,118,6],[142,14,118,12,"response"],[142,22,118,20],[142,25,118,23],[142,31,118,29,"fetch"],[142,36,118,34],[142,37,118,35],[142,40,118,38,"API_URL"],[142,47,118,45],[142,61,118,59,"user"],[142,65,118,63],[142,66,118,64,"user_id"],[142,73,118,71],[142,83,118,81],[142,85,118,83],[143,10,119,8,"method"],[143,16,119,14],[143,18,119,16],[144,8,120,6],[144,9,120,7],[144,10,120,8],[145,8,122,6],[145,12,122,10,"response"],[145,20,122,18],[145,21,122,19,"ok"],[145,23,122,21],[145,25,122,23],[146,10,123,8],[146,16,123,14,"updatedUser"],[146,27,123,25],[146,30,123,28],[147,12,123,30],[147,15,123,33,"user"],[147,19,123,37],[148,12,123,39,"is_premium"],[148,22,123,49],[148,24,123,51],[149,10,123,56],[149,11,123,57],[150,10,124,8],[150,16,124,14,"AsyncStorage"],[150,28,124,26],[150,29,124,26,"default"],[150,36,124,26],[150,37,124,27,"setItem"],[150,44,124,34],[150,45,124,35],[150,51,124,41],[150,53,124,43,"JSON"],[150,57,124,47],[150,58,124,48,"stringify"],[150,67,124,57],[150,68,124,58,"updatedUser"],[150,79,124,69],[150,80,124,70],[150,81,124,71],[151,10,125,8,"set"],[151,13,125,11],[151,14,125,12],[152,12,125,14,"user"],[152,16,125,18],[152,18,125,20,"updatedUser"],[153,10,125,32],[153,11,125,33],[153,12,125,34],[154,8,126,6],[155,6,127,4],[155,7,127,5],[155,8,127,6],[155,15,127,13,"error"],[155,20,127,18],[155,22,127,20],[156,8,128,6,"console"],[156,15,128,13],[156,16,128,14,"error"],[156,21,128,19],[156,22,128,20],[156,38,128,36],[156,40,128,38,"error"],[156,45,128,43],[156,46,128,44],[157,6,129,4],[158,4,130,2],[159,2,131,0],[159,3,131,1],[159,4,131,2],[159,5,131,3],[160,0,131,4],[160,3]],"functionMap":{"names":["<global>","create$argument_0","loadUser","login","register","logout","updateMode","upgradeToPremium"],"mappings":"AAA;8CCwB;YCK;GDa;SEE;GFmB;YGE;GHmB;UIE;GJG;cKE;GLmB;oBME;GNiB;EDC"},"hasCjsExports":false},"type":"js/module"}]}